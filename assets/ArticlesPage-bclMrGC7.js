import{d as b,o as t,a as o,b as d,t as l,u as A,r as g,c as D,i as F,k,z as f,f as _,p as $,F as B,e as T,A as V,x as R,y as U}from"./index-Pl7ccDjs.js";import{u as j,A as q,c as z}from"./AppLoading-DDc_UpMF.js";const E=i=>{const r=new Date(i);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)},G={class:"group cursor-pointer rounded-lg border border-gray-300 bg-blue-50 p-4 shadow-md hover:bg-blue-100 hover:shadow-lg dark:border-gray-700 dark:bg-slate-800 dark:hover:bg-slate-700"},H={class:"mb-2 text-xl font-semibold text-blue-600 dark:text-blue-400"},I={class:"mb-4 text-sm text-gray-600 hover:underline dark:text-gray-400"},M={class:"text-sm text-gray-800 dark:text-gray-200"},S=b({__name:"ArticleCard",props:{article:{},onProductClick:{type:Function}},setup(i){const r=i,p=()=>{r.onProductClick(r.article.product)};return(s,n)=>(t(),o("article",G,[d("h3",H,l(s.article.headline),1),d("p",I,l(s.article.name),1),d("p",{class:"cursor-pointer text-sm text-gray-800 hover:underline dark:text-gray-200",onClick:p},l(s.article.product),1),d("p",M,l(A(E)(s.article.date)),1)]))}}),J={class:"mx-auto max-w-6xl space-y-8 p-6"},K={class:"rounded-2xl bg-blue-50 p-4 shadow-md dark:bg-slate-900 dark:text-gray-100 dark:shadow-inner"},O={class:"mb-6 flex flex-wrap items-center gap-2 text-2xl font-semibold"},Q={key:0},W={key:0,class:"flex h-64 items-center justify-center"},X={key:1,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},Y={key:2,class:"text-center"},Z={class:"text-lg text-gray-600 dark:text-gray-400"},ee={key:0},oe=b({__name:"ArticlesPage",setup(i){const r=V(),p=R(),s=g(r.params.countrycode.toLowerCase()),n=g(""),C=D(()=>z[s.value.toUpperCase()]||s.value),y=g([]),v=g(!0),{data:h,isLoading:w}=j();F(()=>{h.value||(v.value=!0),k(()=>w.value,a=>{!a&&h.value&&(x(),v.value=!1)},{immediate:!0}),k(()=>r.hash,x)});const x=()=>{var m;if(!h.value)return;const a=(m=r.hash)==null?void 0:m.replace("#","").toLowerCase(),c=h.value.filter(e=>{const u=e.countrycode.toLowerCase()===s.value,P=!a||e.product.toLowerCase()===a;return u&&P});if(!a)n.value="";else if(c.length>0){const e=c.find(u=>u.product.toLowerCase()===a);n.value=e?e.product:""}y.value=c.sort((e,u)=>new Date(u.date).getTime()-new Date(e.date).getTime()).map(e=>({...e,headline:e.headline||"No headline available",name:e.name||"Unknown source",product:e.product||"No product specified",date:e.date||"No date specified"}))},L=a=>{p.replace({hash:`#${a.toLowerCase()}`})},N=()=>{n.value="",p.replace({hash:""})};return(a,c)=>(t(),o("main",J,[d("section",K,[d("h2",O,[f(" Articles for "+l(C.value)+" ",1),n.value?(t(),o("span",Q," - "+l(n.value),1)):_("",!0),n.value?(t(),o("button",{key:1,class:"cursor-pointer rounded bg-[#29377C] px-2 py-1 text-sm text-white transition hover:bg-[#4f5a99]",onClick:N}," Clear ")):_("",!0)]),v.value?(t(),o("div",W,[$(q)])):y.value.length>0?(t(),o("div",X,[(t(!0),o(B,null,T(y.value,(m,e)=>(t(),U(S,{key:e,article:m,onProductClick:L},null,8,["article"]))),128))])):(t(),o("div",Y,[d("p",Z,[c[0]||(c[0]=f(" No articles available for this country ")),n.value?(t(),o("span",ee," and product")):_("",!0),c[1]||(c[1]=f(". "))])]))])]))}});export{oe as default};
